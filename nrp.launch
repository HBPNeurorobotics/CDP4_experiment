<?xml version="1.0"?>
<launch>
  <node name="saliency" pkg="embodied_attention" type="saliency.py" output="screen">
    <param name="saliency_file" value="$(find embodied_attention)/model/model.ckpt"/>
    <param name="network_input_width" value="256"/>
    <param name="network_input_height" value="192"/>
    <remap from="/rgb/image_raw" to="/hollie/camera/left/image_raw"/>
  </node>
  <node name="curiosity" pkg="embodied_attention" type="curiosity.py" output="screen"/>
  <node name="saccade" pkg="embodied_attention" type="saccade.py" output="screen">
    <param name="shift_activity" value="True"/>
    <remap from="/saliency_map" to="saliency_map_curiosity"/>
  </node>
  <node name="head_manager" pkg="embodied_attention" type="head_manager.py" output="screen">
    <param name="saliency_width" value="256"/>
    <param name="saliency_height" value="192"/>
    <param name="move_head" value="True"/>
    <param name="move_eyes" value="True"/>
  </node>
  <node name="recognize" pkg="embodied_attention" type="recognize.py" output="screen">
    <param name="model_path" value="$(env HOME)/.opt/models/research"/>
    <param name="graph_path" value="$(env HOME)/.opt/graph_def/frozen_inference_graph.pb"/>
  </node>
  <node name="visual_memory_module" pkg="ros_holographic" type="visual_memory_module.py" output="screen"/>
  <node name="visualizer" pkg="embodied_attention" type="visualizer.py" output="screen">
    <remap from="/saliency_map_image" to="saliency_map_curiosity_image"/>
  </node>
  <node pkg="rosbag" type="record" name="recorder" output="screen" args="/clock /saccade_target /robot/eye_tilt/pos /robot/left_eye_pan/pos /roi /label /probe_results /status">
  </node>

  <arg name="image" default="/image_annotated"/>
  <arg name="images_path" default="images"/>

  <group ns="hugin_panorama">
    <node pkg="image_view" type="image_saver" name="image_saver" output="screen">
      <param name="filename_format" value="$(arg images_path)/%04i.png"/>
      <param name="save_all_image" value="false"/>
      <remap from="image" to="$(arg image)" />
    </node>

    <node pkg="hugin_panorama" type="hugin_panorama" name="hugin_panorama" output="screen">
      <param name="images_path" value="$(arg images_path)"/>
      <remap from="panorama/compressed" to="panorama/compressed" />
    </node>
  </group>
</launch>
